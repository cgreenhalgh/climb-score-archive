<!DOCTYPE html>
<html>
  <head>
		<title>MELD: Music Encoding and Linked Data</title>
  </head>
  <body>
    <div class="container"></div>
  </body>
  <script src="verovio-toolkit.js"></script>
  <script src="/bundle.js"></script>
  <script type="text/javascript">
  var annotations = [];
	function getQueryVariable(variable)
	{
		   var query = window.location.search.substring(1);
		   var vars = query.split("&");
		   for (var i=0;i<vars.length;i++) {
				   var pair = vars[i].split("=");
				   if(pair[0] == variable){return pair[1];}
		   }
		   return(false);
	}

	var performance = getQueryVariable("perf") || "";

	window.addEventListener("message", 
		function(x) { 
			if(x.data.type === "performance") {
				var perf = x.data.payload || ""
				window.location.href = "http://localhost:8080/archive?perf=" + x.data.payload + "&frag=basecamp";
			} else if(x.data.type === "fragment") { 
				window.location.href = "http://localhost:8080/archive?perf=" + performance + "&frag=" + x.data.payload.replace("Climb_", "");
			}
		}, false);
  </script>
</html>
